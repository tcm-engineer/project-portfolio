<!DOCTYPE HTML>
<html>
	<head>
		<title>Project Portfolio</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />

		<link rel="apple-touch-icon-precomposed" sizes="57x57" href="images/icon/apple-touch-icon-57x57.png" />
		<link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/icon/apple-touch-icon-114x114.png" />
		<link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/icon/apple-touch-icon-72x72.png" />
		<link rel="apple-touch-icon-precomposed" sizes="144x144" href="images/icon/apple-touch-icon-144x144.png" />
		<link rel="apple-touch-icon-precomposed" sizes="60x60" href="images/icon/apple-touch-icon-60x60.png" />
		<link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/icon/apple-touch-icon-120x120.png" />
		<link rel="apple-touch-icon-precomposed" sizes="76x76" href="images/icon/apple-touch-icon-76x76.png" />
		<link rel="apple-touch-icon-precomposed" sizes="152x152" href="images/icon/apple-touch-icon-152x152.png" />
		<link rel="icon" type="image/png" href="images/icon/favicon-196x196.png" sizes="196x196" />
		<link rel="icon" type="image/png" href="images/icon/favicon-96x96.png" sizes="96x96" />
		<link rel="icon" type="image/png" href="images/icon/favicon-32x32.png" sizes="32x32" />
		<link rel="icon" type="image/png" href="images/icon/favicon-16x16.png" sizes="16x16" />
		<link rel="icon" type="image/png" href="images/icon/favicon-128.png" sizes="128x128" />
		<meta name="application-name" content="&nbsp;"/>
		<meta name="msapplication-TileColor" content="#FFFFFF" />
		<meta name="msapplication-TileImage" content="mstile-144x144.png" />
		<meta name="msapplication-square70x70logo" content="mstile-70x70.png" />
		<meta name="msapplication-square150x150logo" content="mstile-150x150.png" />
		<meta name="msapplication-wide310x150logo" content="mstile-310x150.png" />
		<meta name="msapplication-square310x310logo" content="mstile-310x310.png" />
		
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>

	<body class="is-preload">

		<!-- Wrapper -->
		<div id="wrapper">
			<div style="background-image: url('images/motherboard2.jpg'); background-repeat: no-repeat;
			background-attachment: fixed; background-size: cover;">

				<!-- Nav -->
				<nav id="nav">
					<ul class="icons">
						<li><h3 style="text-transform: capitalize; font-size: 20px; padding-top: 1rem; padding-left: 0.8rem; padding-right: 50rem;"><a href="index.html#nav">Thomas Mead</a></h3></li>
						<li><h3 style="font-style: italic; font-weight: 10; font-family: Calisto MT; text-transform: capitalize; padding-top: 1rem; font-size: 20px;">
							<a href="documents/resume.pdf" download="Thomas Mead - Resume">Resume</a></h3></li>
						<li><a href="https://www.linkedin.com/in/tom-mead-09a652196/" class="icon brands fa-linkedin"><span class="label">LinkedIn</span></a></li>
						<li><a href="https://github.com/tcm-engineer" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
					</ul>
				</nav>

				<!-- Main -->
				<div id="main">
					<!-- Post -->
					<section class="post" style="line-height: normal;">
						<header class="major">
							<h1 style="text-transform: capitalize;">IoT Interoperability: Edge-Based IoT Platform</h1>
							<p style="line-height: normal; margin-top: -1.5rem; text-align: center; font-weight: bold;">Source Code: <a style="font-weight: normal;" 
								href="https://github.com/tcm-engineer/edge-iot-platform">https://github.com/tcm-engineer/edge-iot-platform</a></p>
							<p style="line-height: normal; margin-top: -1.5rem; text-align: center; font-weight: bold;">Project Summary Poster: 
								<a style="font-weight: normal;" href="documents/IoT Interoperability Edge-based IoT Platform Poster - Thomas Mead.pdf">
									Edged-Based IoT Platform Poster</a></p>
						</header>

						<video style="display: block; margin: 0 auto;" width="640" height="360" controls>
							<source src="images/edge-iot-platform-demo.mp4" type="video/mp4">
						  Your browser does not support the video tag.
						</video>

						<p><strong style="font-size: 2em; line-height: 1.5em;">Aims and Objectives</strong></br>
							The IoT has emerged as the next technological revolution through advancements in
							electronic and wireless communication technologies [1]. By 2025, the International
							Data Group has forecast a total of 41.6 billion connected IoT devices generating 79.4
							zettabytes of data [2]. The connectivity of these devices will provide diverse applications 
							impacting all domains of modern society. However, there are a variety of significant
							challenges at each level of the IoT architecture; this includes the connected device level,
							edge level and the cloud level, which limit the scalability of the IoT.</br></br>

							Since 1995, interoperability has been recognised by the International Telecommunication
							Union as the main issue limiting the success of this technology [3]. In the IoT, interoperability 
							is defined by the ability of two systems to communicate and share services
							[4]. From this, different areas of interoperability have emerged, most notably technical,
							syntactical, semantic and organisational interoperability [5]. The primary focus of this
							project is achieving technical interoperability, which considers the physical and software
							compatibility of the devices, including the protocols used to communicate between them
							[6]. The present IoT marketplace ignores this issue, choosing to develop single communication
							 protocol solutions to specific scenarios. These niche systems are isolated,
							unable to interact with each other. This forms a plethora of independent IoT systems,
							often requiring their own gateway, resulting in the installation of a range of gateways
							for different situations. </br></br>

							Another significant issue limiting the performance of this technology is the current 
							implementation of cloud computing integration within the IoT. The high computing power
							of cloud services has been utilised effciently for data management in the IoT. However,
							with the increasing quantity of data generated from IoT devices, the bandwidth of a
							network is becoming strained. The speed of data transportation is becoming the bottleneck
							 for the cloud-based computing paradigm; often, this latency is too high and
							unable to fulfill the requirements of the IoT system [7]. IoT-generated data must be
							stored, processed, analysed and acted upon at the edge of the network to reduce this
							bottleneck.</br></br>

							This project addresses these challenges and provides a prototype solution through the
							development of an edge-based IoT Hub. The design is a single gateway interface for a
							variety of heterogeneous IoT devices, bridging between disparate communication protocols.
							All the connected devices implement home-automation functionality; however, the
							aim is to demonstrate an edge-based solution to IoT technical interoperability which
							can be adapted easily for other situations. As the IoT continues to expand with more
							connected devices rapidly, technical interoperability is critical for the scalability of this
							technology. Hub-to-hub interoperability is also made possible through cloud integration,
							outlining the basis of an IoT Hub infrastructure. Privacy and security are other
							vital factors in the development of the IoT that require consideration. However, this
							project does not focus on combating the issues faced in these areas because the research
							required would be a project on its own.						
						</p>

						<p><strong style="font-size: 2em; line-height: 1.5em;">Design and Implementation</strong></br>
							The edge-based IoT Hub developed for this project is a centralised gateway to a star
							network topology, communicating over a range of protocols to a set of heterogeneous
							devices. These devices implement a IoT Hub compatible communication protocol, and
							all provide unique home-automation functionality. The IoT Hub design is developed
							on a commercially-available Raspberry Pi 3B+ and predominately written in Python.
							This device has been selected because it has interfacing capabilities with Python and C.
							Also, it has a range of in-built communication protocol capabilities as well as available
							hardware expansions for other protocol implementations. The IoT Hub performs the
							communication interfacing, data management, cloud delivery and hosts a web server
							that runs a web interface. Through the web interface, the user can read the status of all
							connected devices, control the actuators and read the sensor data. Select sensor data
							can also be saved to the user's personal Google Drive, providing an external cloud
							storage.</br></br>
							The design was developed in stages; this comprises of the wireless device connectivity
							and functionality, data management and finally the web interface design. These stages
							were broken down into modules, which are the set of functions implemented for each
							device. Each module was developed and tested separately and then progressively inte-
							grated into the full-system. This involved mapping the device and data management
							functions to a Flask4 application and assigning them appropriate interactive web inter-
							face features. The application incorporates HTML, CSS and JavaScript to provide
							a GUI for the system, accessible through a web server hosted on the IoT Hub.
						</p>

							<div style="margin-top: -0.5rem; width: 70%; margin-left: auto; margin-right: auto;" class="image main"><img src="images/projectDiagram.PNG" alt="3rd Year Project Network Architecture" /></div>
						
													
							<p><strong style="font-size: 1.5em; line-height: 2em;">Devices</strong></br>
								<strong style="font-size: 1.2em;">NodeMCU Thermostat</strong></br>
								The NodeMCU was programmed in Arduino code to communicate to the IoT Hub
								through MQTT over WiFi. This is possible through the embedded ESP8266 WiFi
								module in the NodeMCU, which has an integrated TCP/IP protocol stack. The Raspberry
								Pi implements the paho-mqtt Python library to enable MQTT connectivity. The
								NodeMCU connects to the MQTT server which is hosted by the IoT Hub, therefore 
								establishing the NodeMCU and the IoT Hub as the MQTT client and broker respectively.
								The NodeMCU subscribes to a topic named thermostat, which is defined and published
								to by the IoT Hub. The publishing of this topic controls the on-off state of the 'thermostat'.
								For testing and demonstration purposes, the NodeMCU thermostat output signal
								is sent to an LED to simulate the control of a thermostat. Therefore, LED logic is set
								to indicate the on-off state on the heating.
							</p>

							<div style="margin-top: -0.5rem; width: 25%; margin-left: auto; margin-right: auto;" class="image main"><img src="images/nodeMCU.png" 
								alt="NodeMCU ESP8266" /></div>
							
							<p><strong style="font-size: 1.2em;">LoPy4 PySense Multi-Sensor</strong></br>
								The LoPy47 module establishes communication to the IoT Hub through the LoRa protocol,
								configured with SF7. The Raspberry Pi requires external hardware to enable LoRa
								connectivity; this is achieved through the implementation of the Dragino Lora/GPS
								HAT expansion module, which is based on the SX1276/SX1278 transceiver. The LoPy4
								reads a Pysense, which is a development board that contains various sensors.</br></p>

								<div style="margin-top: -1.5rem; width: 35%; margin-left: auto; margin-right: auto;" class="image main"><img src="images/lora.PNG" 
									alt="LoRa Devices" /></div>

							<p style="margin-top: -3rem;">	
								The LoPy4 is programmed, in MicroPython, to read a Si7006-A20 temperature and
								humidity sensor and an LTR-329ALS-01 ambient light sensor from the Pysense. The
								LoPy4 transmits the sensor information every 30-seconds, configured with an identifier
								number. An identifier is a unique number assigned to each node to indicate the source
								node of the LoRa message for the IoT Hub. In the interval between message transmission,
								the LoPy4 is programmed to deep-sleep mode to conserve power. This mode is the
								lowest executable power consumption configuration available to the device, significantly
								reducing power usage.
							</p>

							<p><strong style="font-size: 1.2em;">Wireless Light Bulb and Wall Plug</strong></br>
								The Tradfri gateway enables the communication between the Zigbee Tradfri wireless
								devices to a LAN. Therefore, the IoT Hub is required to communicate through the
								gateway to the Tradfri wireless devices. Through Ethernet, the Tradfri gateway connects
								to a wireless router, and the IoT Hub establishes communication to the gateway through
								CoAP over WiFi. The IoT Hub implements the libcoap library13 to enable CoAP.
								The offical documentation for the Tradfri gateway states it is not an open platform;
								this requires reverse-engineering the system to enable external communication from the
								IoT Hub and gain control of the Tradfri devices. The open-source pytradfri Python
								library contains functions to assist in this. To enable this communication, the IoT Hub
								sends a message to the gateway IP address containing the unique security code; the
								manufacturer assigns each Tradfri gateway this code. Once accepted, the connection is
								established between the IoT Hub and the gateway through CoAP over WiFi.</br></p>

							<div style="margin-top: -1.5rem; width: 50%; margin-left: auto; margin-right: auto;" class="image main"><img src="images/tradfri.PNG" 
								alt="Tradfri Devices" /></div>	

							<p style="margin-top: -3rem;">	
								The IoT Hub configures and sends commands to the Tradfri gateway and learns information
								about the number, type and state of the connected devices. Functionality has
								been included in the IoT Hub to send commands to the gateway to control these devices,
								and the Zigbee protocol establishes Tradfri gateway and device communication. The
								devices implemented for this design are a Tradfri Smart Light Bulb and Smart Wall
								Plug. The IoT Hub establishes control of the on-off state and light intensity of the
								Smart Light Bulb and the on-off state of the Smart Wall Plug.
							</p>

							<p><strong style="font-size: 1.2em;">Raspberry Pi Door Sensor Sub-System</strong></br>
								The door sensor sub-system is a Raspberry Pi 3B+ integrated with a PIR sensor and a
								reed switch, which communicates wirelessly through the BLE protocol to the IoT Hub.
								The PIR sensor is implemented as a proximity sensor, activating when someone is in
								front of the door. The reed switch is mounted to the door frame and a magnet to the
								door. These components align when the door is closed. The magnetically activated reed
								switch is configured to be normally closed when the door is in the shut position and
								open circuit when the door is opened. This circuit indicates the open-closed state of the
								door.</br></br>
								The utilisation of the built-in Raspberry Pi Bluetooth 4.1 antenna establishes BLE
								communication between the door sensor sub-system and IoT Hub. To enable BLE for
								the Raspberry Pi, the official Linux Bluetooth stack, BlueZ is installed. The Raspberry
								Pi Bluetooth daemon, 'bluetoothd', which manages all the Bluetooth devices, is updated
								and labelled with an 'experimental' flag to allow BLE communication. This update is
								required because some aspects of BlueZ are still not yet fully established.</br></p>

							<div style="margin-top: -1.5rem; width: 30%; margin-left: auto; margin-right: auto;" class="image main"><img src="images/doorSensor.png" 
								alt="Raspberry Pi Door Sensor" /></div>

								<p style="margin-top: -3rem;">	
									The door sub-system is programmed in Python using Bluez to be configured as a BLE
									server and defined with a BLE GAP. The GAP defines a door sub-system service which
									contains two characteristics, the reed switch state and PIR sensor state, the service
									and characteristic are all assigned a UUID. The sub-system periodically broadcasts
									advertising packets for a BLE device to detect and possibly connect to it. The IoT
									Hub utilises the open-source BLE Python interface, BluePy, to configure itself as
									BLE client. This client initiates a BLE connection to the door sub-system through the
									broadcasting advertisements. Once this is complete, the door sub-system only sends
									notifications to the IoT Hub when a characteristic is updated, passing the information
									of the new characteristic value.
								</p>

								<p><strong style="font-size: 1.2em;">Who's Home Scan</strong></br>
									Utilising the built-in Bluetooth 4.1 antenna, the IoT Hub scans for all Bluetooth Classic 
									enabled devices. With knowledge of a device's Bluetooth MAC address and a corresponding 
									user-selected, unique identifier, the IoT Hub can identify if that device is
									within proximity. Nowadays, Bluetooth is often kept on for modern mobile phone's as it
									uses very minimal power. Also, most people do not leave the house without their mobile
									phone. The IoT Hub could be configured with the residents' mobile phone Bluetooth
									MAC addresses, which could be used as a reasonable assumption of the user and fellow
									residents being at home or not through the discovery of the devices from the Bluetooth
									classic scan.</br></p>

								<p><strong style="font-size: 1.5em; line-height: 2em;">Flask Application</strong></br>
									The Flask application generates the web interface for this system; it displays system
									information, provides actuator control for connected devices and access to cloud storage
									for sensor data. Flask is a WSGI web micro-framework written in Python. The IoT Hub
									hosts the web server via the Flask application, implementing the HTTP methods, GET
									and POST. The application combines HTML, CSS and JavaScript files which provide
									the page template form, style and additional functionality, respectively, to generate the
									GUI. Each module has an associated class containing the related attributes (variables)
									and methods (functions) in the Flask application. </br></br>
									The web interface comprises of four pages, a homepage, actuators page, sensors page
									and an about page, all accessible through a navigation bar. The homepage displays
									a description of the system, displaying additional information for each device in the
									network architecture. Whereas, the about page gives an overview of the project, ex-
									plaining the intention behind the system. The actuators page provides information and
									control for the controllable connected devices, displaying their current state and func-
									tional controllability. Finally, the sensors page displays all the sensor information and
									enables storing sensor data to the Google Cloud Platform. The page displays are given
									in Appendix E. Each page has an associated URL route which returns the rendered
									template display. The sensor and actuator pages implement URL extensions for the
									module functionalities that their respected page implements.
								</p>

								<div class="rows" >
									<div class="columns" style="margin-left: 2em; width:45%;">
										<img src="images/sensorPage.png" alt="Sensors Web Page" style="width:100%;">
									</div>
									<div class="columns" style="margin-left: 1rem; width:45%;">
										<img src="images/actuatorsPage.png" alt="Acuators Web Page" style="width:100%;">
									</div>
								</div>

						<p style="font-size: 1.5em; line-height: 0em; margin-top: 2em;"><strong>References</strong>
							<div style="font-size: 0.75rem;">
							[1] M. Aly, F. Khomh, Y.-G. Gueheneuc, H. Washizaki, and S. Yacout, "Is fragmentation a
							threat to the success of the internet of things?" IEEE Internet of Things Journal, vol. 6,
							no. 1, pp. 472-487, 2018.</br>
							[2] IDC. (Accessed March 29, 2020) The growth in connected iot devices is expected to
							generate 79.4zb of data in 2025. [Online]. Available: https://www.idc.com/getdoc.jsp?
							containerId=prUS45213219 </br>
							[3] E. E. Kim and S. Ziegler, "Towards an open framework of online interoperability and
							performance tests for the internet of things," in 2017 Global Internet of Things Summit
							(GIoTS). IEEE, 2017, pp. 1-6. </br>
							[4] J. Kiljander, A. D'elia, F. Morandi, P. Hyttinen, J. Takalo-Mattila, A. Ylisaukko-Oja,
							J.-P. Soininen, and T. S. Cinotti, "Semantic interoperability architecture for pervasive
							computing and internet of things," IEEE access, vol. 2, pp. 856{873, 2014. </br>
							[5] G. Hatzivasilis, I. Askoxylakis, G. Alexandris, D. Anicic, A. Broring, V. Kulkarni,
							K. Fysarakis, and G. Spanoudakis, "The interoperability of things: Interoperable solutions
							as an enabler for iot and web 3.0," in 2018 IEEE 23rd International Workshop on
							Computer Aided Modeling and Design of Communication Links and Networks (CAMAD).
							IEEE, 2018, pp. 1-7.</br>
							[6] J. Gubbi, R. Buyya, S. Marusic, and M. Palaniswami, "Internet of things (iot): A vision,
							architectural elements, and future directions," Future generation computer systems,
							vol. 29, no. 7, pp. 1645-1660, 2013. </br>
							[7] W. Shi, J. Cao, Q. Zhang, Y. Li, and L. Xu, "Edge computing: Vision and challenges,"
							IEEE internet of things journal, vol. 3, no. 5, pp. 637-646, 2016.</br>
							</div>
						</p>

						

						<ul class="actions special">
							<li><a href="index.html#nav" class="button">Return</a></li>
						</ul>
					</section>
				</div>

				<!-- Footer -->
				<footer id="footer">
					<section class="split contact">
						<section>
							<h3>Email</h3>
							<p><a href="mailto: tcm1g17@soton.ac.uk">tcm1g17@soton.ac.uk</a></p>
						</section>
						<section>
							<h3>Social</h3>
							<ul class="icons alt">
								<li><a href="https://www.linkedin.com/in/tom-mead-09a652196/" class="icon brands alt fa-linkedin"><span class="label">Instagram</span></a></li>
								<li><a href="https://github.com/tcm-engineer" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
							</ul>
						</section>
					</section>
				</footer>
			</div>
		</div>

		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.scrollex.min.js"></script>
		<script src="assets/js/jquery.scrolly.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>

	</body>
</html>